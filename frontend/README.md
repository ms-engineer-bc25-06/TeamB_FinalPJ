# ğŸŒ Frontend ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (Next.js)

ã“ã® README ã§ã¯ `frontend` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®é–‹ç™ºæ‰‹é †ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (authed)/          # èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼å°‚ç”¨ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ app/           # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emotion-selection/     # æ„Ÿæƒ…é¸æŠ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emotion-intensity/     # æ„Ÿæƒ…å¼·åº¦
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emotion-confirmation/  # æ„Ÿæƒ…ç¢ºèª
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ emotion-education/     # æ„Ÿæƒ…æ•™è‚²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ voice/                 # éŸ³å£°éŒ²éŸ³
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ report/                # ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ entries/               # è¨˜éŒ²ä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ roleplay/              # ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ non-cognitive/         # éèªçŸ¥èƒ½åŠ›
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tips/                  # ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ faq/                   # FAQ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ privacy/               # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usage/                 # åˆ©ç”¨è¦ç´„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ setup/                 # åˆæœŸè¨­å®š
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ payment/               # æ±ºæ¸ˆ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...                    # ãã®ä»–æ©Ÿèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ billing/                   # èª²é‡‘ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ (public)/          # å…¬é–‹ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ login/         # ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ subscription/  # ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚   â””â”€â”€ help/          # ãƒ˜ãƒ«ãƒ—
â”‚   â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ not-found.tsx      # 404ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ page.module.css    # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ components/             # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ ui/                # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ AudioPlayer.tsx    # éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”‚       â”œâ”€â”€ HamburgerMenu.tsx  # ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”‚       â”œâ”€â”€ SpeechBubble.tsx   # å¹ãå‡ºã—
â”‚   â”‚       â”œâ”€â”€ Spinner.tsx        # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼
â”‚   â”‚       â”œâ”€â”€ PrimaryButton.tsx  # ãƒ—ãƒ©ã‚¤ãƒãƒªãƒœã‚¿ãƒ³
â”‚   â”‚       â”œâ”€â”€ KokoronDefault.tsx # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
â”‚   â”‚       â”œâ”€â”€ KokoronBowing.tsx  # ãŠè¾å„€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
â”‚   â”‚       â”œâ”€â”€ Kokoron404.tsx     # 404ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
â”‚   â”‚       â”œâ”€â”€ KokoronReadingReport.tsx # ãƒ¬ãƒãƒ¼ãƒˆèª­ã¿å–ã‚Šã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
â”‚   â”‚       â””â”€â”€ index.ts           # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ hooks/                  # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useAudio.ts        # éŸ³å£°æ“ä½œãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useChildren.ts     # å­ä¾›æƒ…å ±ç®¡ç†ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useSubscription.ts # ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ•ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ useTodayEntry.ts   # ä»Šæ—¥ã®è¨˜éŒ²ç®¡ç†ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ lib/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»API
â”‚   â”‚   â”œâ”€â”€ api.ts             # APIé€šä¿¡
â”‚   â”‚   â”œâ”€â”€ firebase.ts        # Firebaseè¨­å®š
â”‚   â”‚   â”œâ”€â”€ voice.ts           # éŸ³å£°å‡¦ç†
â”‚   â”‚   â””â”€â”€ fetcher.ts         # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°
â”‚   â”œâ”€â”€ styles/                 # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ãƒ†ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«CSS
â”‚   â”‚   â””â”€â”€ theme.ts           # ãƒ†ãƒ¼ãƒè¨­å®šï¼ˆè‰²ã€ã‚µã‚¤ã‚ºã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â”œâ”€â”€ types/                  # TypeScriptå‹å®šç¾©
â”‚   â”‚   â””â”€â”€ api.ts             # APIé–¢é€£ã®å‹å®šç¾©
â”‚   â”œâ”€â”€ utils/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â””â”€â”€ audio.ts           # éŸ³å£°å‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ contexts/               # React Context
â”‚       â””â”€â”€ AuthContext.tsx    # èªè¨¼çŠ¶æ…‹ç®¡ç†
â”œâ”€â”€ public/                     # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ images/                 # ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ emotions/          # æ„Ÿæƒ…ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ13ç¨®é¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ kokoron/           # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒ
â”‚   â”‚   â”œâ”€â”€ background.webp    # èƒŒæ™¯ç”»åƒ
â”‚   â”‚   â”œâ”€â”€ roleplay.webp      # ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ç”»åƒ
â”‚   â”‚   â””â”€â”€ publictopbackground.webp # ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒšãƒ¼ã‚¸èƒŒæ™¯
â”‚   â””â”€â”€ sounds/                 # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚       â”œâ”€â”€ characterAskFeeling01.mp3
â”‚       â”œâ”€â”€ characterAskIntensity02.mp3
â”‚       â”œâ”€â”€ characterAskReason04.mp3
â”‚       â”œâ”€â”€ characterConfirmFeeling03.mp3
â”‚       â””â”€â”€ characterThankYou05.mp3
â”œâ”€â”€ tests/                      # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ mocks/                 # ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ docs/                       # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â””â”€â”€ README.md              # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è©³ç´°èª¬æ˜
â”œâ”€â”€ package.json                # ä¾å­˜é–¢ä¿‚ãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ tsconfig.json              # TypeScriptè¨­å®š
â”œâ”€â”€ next.config.ts             # Next.jsè¨­å®š
â”œâ”€â”€ middleware.ts              # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”œâ”€â”€ eslint.config.mjs          # ESLintè¨­å®š
â”œâ”€â”€ .prettierrc.json           # Prettierè¨­å®š
â””â”€â”€ .prettierignore            # Prettieré™¤å¤–è¨­å®š
```

## 1. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®š

- `.env.example` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ `.env.local` ã‚’ä½œæˆ
- Notion ãŠ™ï¸ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—å€¤ã‚’è¨­å®š

## 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

## 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ãå‹•ä½œç¢ºèª

## 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
npm test -- EmotionSelectionPage.test.tsx

# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
npm run test:coverage
```

## 5. ãƒ“ãƒ«ãƒ‰ãƒ»ãƒªãƒ³ã‚¿ãƒ¼

```bash
# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# ãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
npm run lint

# å‹ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit
```

## 6. ä»Šå›ã®ä¿®æ­£å†…å®¹

### ESLintè­¦å‘Šã®ä¿®æ­£
- æœªä½¿ç”¨ã®å¤‰æ•°ãƒ»ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®å‰Šé™¤
- `any`å‹ã®é©åˆ‡ãªå‹ã¸ã®ç½®ãæ›ãˆ
- æœªä½¿ç”¨ã®é–¢æ•°ã®å‰Šé™¤

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æœ€é©åŒ–
- `AudioPlayer`ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå•é¡Œã‚’ä¿®æ­£
- `HamburgerMenu`ã®ä½¿ç”¨æ–¹æ³•ã‚’ç°¡ç´ åŒ–
- `SpeechBubble`ã®æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å‰Šé™¤

### ãƒ•ãƒƒã‚¯ã®æœ€é©åŒ–
- `useAudio`ãƒ•ãƒƒã‚¯ã®ç°¡ç´ åŒ–
- æœªä½¿ç”¨ã®å‹å®šç¾©ã®å‰Šé™¤

## 7. S3 é€£æº

éŸ³å£°ãƒ»ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ S3 ã«ä¿å­˜

Presigned URL ã‚’ä½¿ç”¨ã—ã¦å®‰å…¨ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¾‹

```javascript
const res = await fetch("/voice/get-upload-url", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ user_id: 1, file_type: "audio", file_format: "webm" }),
});
const { upload_url, content_type } = await res.json();

await fetch(upload_url, {
  method: "PUT",
  headers: { "Content-Type": content_type },
  body: fileBlob,
});
```

## 8. é–‹ç™ºç’°å¢ƒ

- **Node.js**: v18.17.0+
- **Next.js**: 15.4.5
- **React**: 19.1.0
- **TypeScript**: 5.x
- **ESLint**: 9.x
- **Prettier**: 3.6.2
- **Firebase**: 12.0.0
- **Stripe**: 7.8.0
- **SWR**: 2.3.4

## 9. åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
npm run dev      # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run build    # æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run start    # æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run lint     # ESLintå®Ÿè¡Œ
```

## 10. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- **ESLint**: `eslint.config.mjs` (Next.jsæ¨å¥¨è¨­å®š)
- **Prettier**: `.prettierrc.json` (ã‚³ãƒ¼ãƒ‰æ•´å½¢)
- **TypeScript**: `tsconfig.json` (å‹ãƒã‚§ãƒƒã‚¯è¨­å®š)
- **Next.js**: `next.config.ts` (ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è¨­å®š)

## 11. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

`src/styles/theme.ts` ã§çµ±ä¸€ã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ç®¡ç†ï¼š

- **ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ** - ãƒ—ãƒ©ã‚¤ãƒãƒªã€ã‚»ã‚«ãƒ³ãƒ€ãƒªã€æ„Ÿæƒ…ã‚«ãƒ©ãƒ¼
- **ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°** - çµ±ä¸€ã•ã‚ŒãŸé–“éš”ç®¡ç†
- **ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£** - ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®éšå±¤
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³** - ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³è¨­å®š
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–** - ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆå®šç¾©

- [UI Design](../docs/UIDesign.md) - ç”»é¢è¨­è¨ˆã®è©³ç´°
